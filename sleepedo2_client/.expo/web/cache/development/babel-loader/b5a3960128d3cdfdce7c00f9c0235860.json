{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Alden\\\\Documents\\\\Code\\\\javascript\\\\mobile\\\\sleepedo2main\\\\sleepedo2_client\\\\components\\\\home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport ChatIcon from \"@expo/vector-icons/Ionicons\";\nimport Coin from \"@expo/vector-icons/FontAwesome5\";\nimport DatePicker from 'react-native-modern-datepicker';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { SocketContext } from \"./socket\";\nimport axios from 'axios';\nimport Chatbox from \"./chatbox\";\nimport AlarmTriggeredModal from \"./alarmTriggeredModal\";\nimport Navbar from \"./navbar\";\nexport default function Home(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      date = _useState2[0],\n      setDate = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      time = _useState4[0],\n      setTime = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pickerOpen = _useState6[0],\n      setPickerOpen = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      active = _useState8[0],\n      setActive = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      turnOnNotify = _useState10[0],\n      setTurnOnNotify = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      activeChat = _useState12[0],\n      setActiveChat = _useState12[1];\n\n  var _useState13 = useState('Rainbow69'),\n      _useState14 = _slicedToArray(_useState13, 2),\n      partner = _useState14[0],\n      setPartner = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      alarmTriggered = _useState16[0],\n      setAlarmTriggered = _useState16[1];\n\n  var _useState17 = useState(''),\n      _useState18 = _slicedToArray(_useState17, 2),\n      room = _useState18[0],\n      setRoom = _useState18[1];\n\n  var _useState19 = useState(''),\n      _useState20 = _slicedToArray(_useState19, 2),\n      alarmId = _useState20[0],\n      setAlarmId = _useState20[1];\n\n  var socket = useContext(SocketContext);\n  useEffect(function () {\n    function em() {\n      var id, token;\n      return _regeneratorRuntime.async(function em$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id = sessionStorage.getItem(\"userId\");\n              token = sessionStorage.getItem(\"token\");\n              socket.emit('auth', {\n                userId: id,\n                token: token\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    em();\n    socket.on('triggered', function (room, alarmId) {\n      console.log('triggered!!!');\n      setRoom(room);\n      setAlarmId(alarmId);\n      setAlarmTriggered(true);\n    });\n    socket.on('room-disconnect', function () {});\n    socket.on('snooze-begin', function () {\n      setAlarmTriggered(false);\n    });\n    socket.on('dismiss-begin', function () {\n      setAlarmTriggered(false);\n      props.navigation.navigate(\"Chat\");\n    });\n    return function () {\n      socket.offAny();\n    };\n  }, [socket]);\n\n  function storeClick() {\n    props.navigation.navigate('Store');\n  }\n\n  function alarmsClick() {\n    alert('already in alarms page');\n  }\n\n  function profileClick() {\n    alert('clicked on profile');\n  }\n\n  function createAlarm() {\n    setPickerOpen(false);\n    setTurnOnNotify(true);\n    console.log();\n  }\n\n  function cancelAlarm() {\n    setActive(false);\n    setPickerOpen(false);\n    setTurnOnNotify(false);\n  }\n\n  function turnOn() {\n    setTurnOnNotify(true);\n  }\n\n  function confirmCreateAlarm() {\n    var now, finalTime, USERID, TOKEN, payload;\n    return _regeneratorRuntime.async(function confirmCreateAlarm$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setActive(true);\n            setPickerOpen(false);\n            setTurnOnNotify(false);\n            now = new Date();\n            now.setHours(now.getHours() - 4);\n            now.setMinutes(now.getMinutes() + 1);\n            now.setSeconds(0);\n            now.setMilliseconds(0);\n            finalTime = now.toISOString();\n            USERID = sessionStorage.getItem(\"userId\");\n            TOKEN = sessionStorage.getItem(\"token\");\n            payload = {\n              alarmTime: finalTime,\n              userId: USERID,\n              token: TOKEN\n            };\n            _context2.next = 14;\n            return _regeneratorRuntime.awrap(axios.post('http://192.168.1.181:5000/createAlarm', payload));\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function muteAudio() {}\n\n  var picker;\n  if (pickerOpen) picker = Picker();else picker = null;\n  var activateModal;\n\n  if (turnOnNotify) {\n    if (active) activateModal = cancelAlarmModel();else activateModal = setAlarmModal();\n  } else activateModal = null;\n\n  var backToChat;\n  if (activeChat) backToChat = backToChatModal();\n  var alarmTriggeredModal;\n\n  if (alarmTriggered) {\n    alarmTriggeredModal = React.createElement(AlarmTriggeredModal, {\n      room: room,\n      alarmId: alarmId,\n      onMute: muteAudio,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 31\n      }\n    });\n  } else alarmTriggeredModal = null;\n\n  function navigate(destination) {\n    if (destination != \"Home\") {\n      props.navigation.navigate(destination);\n    }\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, React.createElement(Navbar, {\n    onChangePage: navigate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: styles.mainPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, backToChat, picker, activateModal, alarmTriggeredModal, React.createElement(TouchableOpacity, {\n    style: styles.alarmContainer,\n    onPress: function onPress() {\n      return setPickerOpen(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: styles.rowAlarmContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: styles.alarmTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 25\n    }\n  }, time == '' ? \"00:00\" : time), React.createElement(TouchableOpacity, {\n    style: styles.activateButton,\n    onPress: function onPress() {\n      return turnOn();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20,\n      color: '#222'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 29\n    }\n  }, active ? \"active\" : \"Turn On\"))), React.createElement(Text, {\n    style: {\n      fontSize: 16,\n      marginLeft: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, date))));\n\n  function backToChatModal() {\n    return React.createElement(TouchableOpacity, {\n      style: styles.backtochat,\n      onPress: function onPress() {\n        return props.navigation.navigate(\"Chat\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 16\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: '#222',\n        fontSize: 18\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, partner), React.createElement(ChatIcon, {\n      style: {\n        fontSize: 30,\n        color: '#222',\n        marginRight: 10,\n        marginLeft: 10\n      },\n      color: \"#e1e1e1\",\n      name: \"arrow-forward-sharp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    }));\n  }\n\n  function setAlarmModal() {\n    return React.createElement(View, {\n      style: styles.activateModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 16\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 25\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, \"Set alarm for \", time, \" on \", date, \"?\"), React.createElement(View, {\n      style: styles.alarmButtonsContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return confirmCreateAlarm();\n      },\n      style: styles.setAlarmButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, \"Confirm\")), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return setTurnOnNotify(false);\n      },\n      style: styles.setCloseButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }\n    }, \"Back\"))));\n  }\n\n  function cancelAlarmModel() {\n    return React.createElement(View, {\n      style: styles.activateModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 16\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 25\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }\n    }, \"Cancel alarm for \", time, \" on \", date, \"?\"), React.createElement(View, {\n      style: styles.alarmButtonsContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return cancelAlarm();\n      },\n      style: styles.setAlarmButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, \"Confirm\")), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return setTurnOnNotify(false);\n      },\n      style: styles.setCloseButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }\n    }, \"Back\"))));\n  }\n\n  function Picker() {\n    return React.createElement(React.Fragment, null, React.createElement(View, {\n      style: styles.alarmButtonsContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return createAlarm();\n      },\n      style: styles.setAlarmButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }\n    }, \"Set\")), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return cancelAlarm();\n      },\n      style: styles.setCloseButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }\n    }, \"Cancel\"))));\n  }\n}\nvar styles = StyleSheet.create({\n  container: {\n    display: 'flex',\n    flex: 1,\n    flexDirection: 'column',\n    marginTop: 24\n  },\n  topContainer: {\n    flex: 1,\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    height: 40,\n    maxHeight: 60,\n    width: '100%',\n    backgroundColor: '#fafbff'\n  },\n  mainPage: {\n    backgroundColor: '#f3f3f3',\n    display: 'flex',\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center'\n  },\n  button: {\n    width: 60,\n    height: 40,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    marginLeft: 20,\n    color: '#222'\n  },\n  profilebutton: {\n    width: 60,\n    height: 40,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    marginLeft: 20,\n    color: '#222'\n  },\n  buttonText: {\n    fontSize: 15,\n    color: '#222'\n  },\n  datePicker: {\n    borderRadius: 10,\n    position: 'relative',\n    zIndex: 4\n  },\n  alarmContainer: {\n    display: 'flex',\n    flex: 1,\n    height: 120,\n    maxHeight: 120,\n    width: \"90%\",\n    backgroundColor: '#f3f3f3f',\n    marginTop: 60,\n    borderRadius: 10,\n    position: 'absolute',\n    zIndex: 1,\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: '#222'\n  },\n  pickerView: {\n    width: '90%',\n    height: 100\n  },\n  setAlarmButton: {\n    width: '45%',\n    height: 70,\n    backgroundColor: '#f3f3f3',\n    color: '#222',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10\n  },\n  setCloseButton: {\n    width: '45%',\n    marginLeft: 10,\n    height: 70,\n    backgroundColor: '#f3f3f3',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10\n  },\n  alarmButtonsContainer: {\n    marginTop: 5,\n    display: 'flex',\n    flexDirection: 'row',\n    flex: 1\n  },\n  alarmTime: {\n    fontSize: 60,\n    alignSelf: 'flex-start',\n    marginLeft: 20\n  },\n  rowAlarmContainer: {\n    width: '100%',\n    height: 80,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  activateButton: {\n    marginLeft: 30,\n    width: 100,\n    height: 60,\n    borderRadius: 10,\n    backgroundColor: '#f3f3f3',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: '#222'\n  },\n  activateModal: {\n    position: 'relative',\n    zIndex: 5,\n    marginTop: 40,\n    display: 'flex',\n    flex: 1,\n    flexDirection: 'column',\n    width: '90%',\n    height: 160,\n    maxHeight: 160,\n    backgroundColor: '#f3f3f3',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#222'\n  },\n  backtochat: {\n    backgroundColor: '#f3f3f3',\n    width: '100%',\n    height: 50,\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"sources":["C:/Users/Alden/Documents/Code/javascript/mobile/sleepedo2main/sleepedo2_client/components/home.js"],"names":["React","useState","useEffect","useContext","useCallback","Icon","ChatIcon","Coin","DatePicker","AsyncStorage","SocketContext","axios","Chatbox","AlarmTriggeredModal","Navbar","Home","props","date","setDate","time","setTime","pickerOpen","setPickerOpen","active","setActive","turnOnNotify","setTurnOnNotify","activeChat","setActiveChat","partner","setPartner","alarmTriggered","setAlarmTriggered","room","setRoom","alarmId","setAlarmId","socket","em","id","sessionStorage","getItem","token","emit","userId","on","console","log","navigation","navigate","offAny","storeClick","alarmsClick","alert","profileClick","createAlarm","cancelAlarm","turnOn","confirmCreateAlarm","now","Date","setHours","getHours","setMinutes","getMinutes","setSeconds","setMilliseconds","finalTime","toISOString","USERID","TOKEN","payload","alarmTime","post","muteAudio","picker","Picker","activateModal","cancelAlarmModel","setAlarmModal","backToChat","backToChatModal","alarmTriggeredModal","destination","styles","container","mainPage","alarmContainer","rowAlarmContainer","activateButton","fontSize","color","marginLeft","backtochat","marginRight","alarmButtonsContainer","setAlarmButton","setCloseButton","StyleSheet","create","display","flex","flexDirection","marginTop","topContainer","alignItems","height","maxHeight","width","backgroundColor","justifyContent","button","borderRadius","profilebutton","buttonText","datePicker","position","zIndex","borderWidth","borderColor","pickerView","alignSelf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\r\nimport { TouchableOpacity, StyleSheet, Text, TextInput, View } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\r\nimport ChatIcon from 'react-native-vector-icons/Ionicons';\r\nimport Coin from 'react-native-vector-icons/FontAwesome5';\r\nimport DatePicker from 'react-native-modern-datepicker';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { SocketContext } from './socket';\r\nimport axios from 'axios';\r\nimport Chatbox from './chatbox';\r\nimport AlarmTriggeredModal from './alarmTriggeredModal';\r\nimport Navbar from './navbar';\r\n\r\nexport default function Home(props) {\r\n\r\n    const [date, setDate] = useState('');\r\n    const [time, setTime] = useState('');\r\n    const [pickerOpen, setPickerOpen] = useState(false);\r\n    const [active, setActive] = useState(false);\r\n    const [turnOnNotify, setTurnOnNotify] = useState(false);\r\n    const [activeChat, setActiveChat] = useState(false);\r\n    const [partner, setPartner] = useState('Rainbow69');\r\n    const [alarmTriggered, setAlarmTriggered] = useState(false);\r\n    const [room, setRoom] = useState('');\r\n    const [alarmId, setAlarmId] = useState('');\r\n\r\n    const socket = useContext(SocketContext);\r\n\r\n    useEffect(() => {\r\n        async function em() {\r\n            // const id = await AsyncStorage.getItem(\"userId\");\r\n            // const token = await AsyncStorage.getItem(\"token\");\r\n            const id = sessionStorage.getItem(\"userId\");\r\n            const token = sessionStorage.getItem(\"token\");\r\n\r\n            socket.emit('auth', {\r\n                userId: id,\r\n                token: token\r\n            });\r\n        }\r\n        em();\r\n\r\n        socket.on('triggered', (room, alarmId) => {\r\n            console.log('triggered!!!');\r\n            setRoom(room);\r\n            setAlarmId(alarmId);\r\n            setAlarmTriggered(true);  //opens up modal for dismiss, snooze,etc\r\n        });\r\n\r\n        socket.on('room-disconnect', () => {\r\n            //reset stuff\r\n        })\r\n\r\n        socket.on('snooze-begin', () => {\r\n            setAlarmTriggered(false);\r\n        })\r\n        socket.on('dismiss-begin', () => {\r\n            setAlarmTriggered(false);\r\n            props.navigation.navigate(\"Chat\");\r\n        })\r\n        return () => {\r\n            socket.offAny();\r\n        }\r\n    }, [socket])\r\n\r\n    //------------------------------------------\r\n\r\n    function storeClick() {\r\n        props.navigation.navigate('Store');\r\n    }\r\n    function alarmsClick() {\r\n        alert('already in alarms page');\r\n    }\r\n    function profileClick() {\r\n        alert('clicked on profile');\r\n    }\r\n\r\n    function createAlarm() {\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(true);\r\n        console.log()\r\n    }\r\n    function cancelAlarm() {\r\n        setActive(false);\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(false);\r\n    }\r\n    function turnOn() {\r\n        setTurnOnNotify(true);\r\n    }\r\n\r\n    async function confirmCreateAlarm() {\r\n        setActive(true);\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(false);\r\n\r\n        //testing purposes only ->\r\n        const now = new Date();\r\n        now.setHours(now.getHours() - 4);\r\n        now.setMinutes(now.getMinutes() + 1);\r\n        now.setSeconds(0);\r\n        now.setMilliseconds(0);\r\n        const finalTime = now.toISOString();\r\n        //for actual use with datepicker ->\r\n        // const alarmString = `${date} ${time}:00`;\r\n        // const eventTime = new Date(alarmString);\r\n        // eventTime.setHours(eventTime.getHours() - 4);\r\n        // const finalTime = eventTime.toISOString();\r\n\r\n        //-------- For Mobile use ASYNC STORAGE ---------\r\n        // const USERID = await AsyncStorage.getItem(\"userId\");\r\n        // const TOKEN = await AsyncStorage.getItem(\"token\");\r\n\r\n        //-------- For web(testing) use SessionStorage ----------\r\n        const USERID = sessionStorage.getItem(\"userId\");\r\n        const TOKEN = sessionStorage.getItem(\"token\");\r\n        const payload = { alarmTime: finalTime, userId: USERID, token: TOKEN }\r\n        await axios.post('http://192.168.1.181:5000/createAlarm', payload);\r\n    }\r\n\r\n    function muteAudio() {\r\n        //mute the audio\r\n    }\r\n\r\n    //open up the date picker\r\n    let picker;\r\n    if (pickerOpen) picker = Picker()\r\n    else picker = null;\r\n    //confirm with user if they want to activate the alarm\r\n    let activateModal;\r\n    if (turnOnNotify) {\r\n        if (active) activateModal = cancelAlarmModel()\r\n        else activateModal = setAlarmModal()\r\n    }\r\n    else activateModal = null;\r\n    //navigate back to chat if chat still active\r\n    let backToChat;\r\n    if (activeChat) backToChat = backToChatModal()\r\n    //alarm main notification modal\r\n    let alarmTriggeredModal;\r\n    if (alarmTriggered) {\r\n        alarmTriggeredModal = <AlarmTriggeredModal room={room} alarmId={alarmId} onMute={muteAudio} />;\r\n    }\r\n    else alarmTriggeredModal = null;\r\n\r\n    function navigate(destination) {\r\n        if (destination != \"Home\") {\r\n            props.navigation.navigate(destination);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <Navbar onChangePage={navigate} />\r\n            <View style={styles.mainPage}>\r\n                {backToChat}\r\n                {picker}\r\n                {activateModal}\r\n                {alarmTriggeredModal}\r\n                <TouchableOpacity style={styles.alarmContainer} onPress={() => setPickerOpen(true)}>\r\n                    <View style={styles.rowAlarmContainer}>\r\n                        <Text style={styles.alarmTime}>{time == '' ? \"00:00\" : time}</Text>\r\n                        <TouchableOpacity style={styles.activateButton} onPress={() => turnOn()}>\r\n                            <Text style={{ fontSize: 20, color: '#222' }}>{active ? \"active\" : \"Turn On\"}</Text>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                    <Text style={{ fontSize: 16, marginLeft: 40 }}>{date}</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </View >\r\n    )\r\n\r\n\r\n\r\n    //----------- COMPONENT FUNCTIONS -------------------------------------------------------------\r\n\r\n    function backToChatModal() {\r\n        return <TouchableOpacity style={styles.backtochat} onPress={() => props.navigation.navigate(\"Chat\")}>\r\n            <Text style={{ color: '#222', fontSize: 18 }}>{partner}</Text>\r\n            <ChatIcon style={{ fontSize: 30, color: '#222', marginRight: 10, marginLeft: 10 }} color=\"#e1e1e1\" name=\"arrow-forward-sharp\" />\r\n        </TouchableOpacity>;\r\n    }\r\n\r\n    function setAlarmModal() {\r\n        return <View style={styles.activateModal}>\r\n            <Text style={{ fontSize: 25 }}>Set alarm for {time} on {date}?</Text>\r\n            <View style={styles.alarmButtonsContainer}>\r\n                <TouchableOpacity onPress={() => confirmCreateAlarm()} style={styles.setAlarmButton}>\r\n                    <Text>Confirm</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={() => setTurnOnNotify(false)} style={styles.setCloseButton}>\r\n                    <Text>Back</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </View>;\r\n    }\r\n\r\n    function cancelAlarmModel() {\r\n        return <View style={styles.activateModal}>\r\n            <Text style={{ fontSize: 25 }}>Cancel alarm for {time} on {date}?</Text>\r\n            <View style={styles.alarmButtonsContainer}>\r\n                <TouchableOpacity onPress={() => cancelAlarm()} style={styles.setAlarmButton}>\r\n                    <Text>Confirm</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={() => setTurnOnNotify(false)} style={styles.setCloseButton}>\r\n                    <Text>Back</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </View>;\r\n    }\r\n\r\n    function Picker() {\r\n        return <>\r\n            {/* <DatePicker\r\n            minuteInterval={1}\r\n            style={styles.datePicker}\r\n            onTimeChange={(time) => setTime(time)}\r\n            onDateChange={(date) => setDate(date)}\r\n        /> */}\r\n            <View style={styles.alarmButtonsContainer}>\r\n                <TouchableOpacity onPress={() => createAlarm()} style={styles.setAlarmButton}>\r\n                    <Text>Set</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={() => cancelAlarm()} style={styles.setCloseButton}>\r\n                    <Text>Cancel</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </>;\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        flexDirection: 'column',\r\n        marginTop: 24,\r\n    },\r\n    topContainer: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        height: 40,\r\n        maxHeight: 60,\r\n        width: '100%',\r\n        backgroundColor: '#fafbff',\r\n    },\r\n    mainPage: {\r\n        backgroundColor: '#f3f3f3',\r\n        display: 'flex',\r\n        flex: 1,\r\n        justifyContent: 'flex-start',\r\n        alignItems: 'center',\r\n    },\r\n    button: {\r\n        width: 60,\r\n        height: 40,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 5,\r\n        marginLeft: 20,\r\n        color: '#222'\r\n    },\r\n    profilebutton: {\r\n        width: 60,\r\n        height: 40,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 5,\r\n        marginLeft: 20,\r\n        color: '#222'\r\n    },\r\n    buttonText: {\r\n        fontSize: 15,\r\n        color: '#222'\r\n    },\r\n    datePicker: {\r\n        borderRadius: 10,\r\n        position: 'relative',\r\n        zIndex: 4,\r\n    },\r\n    alarmContainer: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        height: 120,\r\n        maxHeight: 120,\r\n        width: \"90%\",\r\n        backgroundColor: '#f3f3f3f',\r\n        marginTop: 60,\r\n        borderRadius: 10,\r\n        position: 'absolute',\r\n        zIndex: 1,\r\n        justifyContent: 'center',\r\n        borderWidth: 1,\r\n        borderColor: '#222'\r\n    },\r\n    pickerView: {\r\n\r\n        width: '90%',\r\n        height: 100\r\n    },\r\n    setAlarmButton: {\r\n        width: '45%',\r\n        height: 70,\r\n        backgroundColor: '#f3f3f3',\r\n        color: '#222',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 10,\r\n    },\r\n    setCloseButton: {\r\n        width: '45%',\r\n        marginLeft: 10,\r\n        height: 70,\r\n        backgroundColor: '#f3f3f3',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 10,\r\n    },\r\n    alarmButtonsContainer: {\r\n        marginTop: 5,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        flex: 1\r\n    },\r\n    alarmTime: {\r\n        fontSize: 60,\r\n        alignSelf: 'flex-start',\r\n        marginLeft: 20\r\n    },\r\n    rowAlarmContainer: {\r\n        width: '100%',\r\n        height: 80,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        alignItems: 'center'\r\n    },\r\n    activateButton: {\r\n        marginLeft: 30,\r\n        width: 100,\r\n        height: 60,\r\n        borderRadius: 10,\r\n        backgroundColor: '#f3f3f3',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        borderWidth: 1,\r\n        borderColor: '#222'\r\n    },\r\n    activateModal: {\r\n        position: 'relative',\r\n        zIndex: 5,\r\n        marginTop: 40,\r\n        display: 'flex',\r\n        flex: 1,\r\n        flexDirection: 'column',\r\n        width: '90%',\r\n        height: 160,\r\n        maxHeight: 160,\r\n        backgroundColor: '#f3f3f3',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderWidth: 1,\r\n        borderColor: '#222'\r\n    },\r\n    backtochat: {\r\n        backgroundColor: '#f3f3f3',\r\n        width: '100%',\r\n        height: 50,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center'\r\n    }\r\n})"]},"metadata":{},"sourceType":"module"}