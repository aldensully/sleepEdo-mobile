{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Alden\\\\Documents\\\\Code\\\\javascript\\\\mobile\\\\sleepedo2main\\\\sleepedo2_client\\\\components\\\\home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { TouchableOpacityBase } from \"react-native-web/dist/index\";\nimport Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport Coin from \"@expo/vector-icons/FontAwesome5\";\nimport DatePicker from 'react-native-modern-datepicker';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { SocketContext } from \"./socket\";\nimport axios from 'axios';\nexport default function Home(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      date = _useState2[0],\n      setDate = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      time = _useState4[0],\n      setTime = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pickerOpen = _useState6[0],\n      setPickerOpen = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      active = _useState8[0],\n      setActive = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      turnOnNotify = _useState10[0],\n      setTurnOnNotify = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      snoozeCount = _useState12[0],\n      setSnoozeCount = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      dismissCount = _useState14[0],\n      setDismissCount = _useState14[1];\n\n  var socket = useContext(SocketContext);\n  var getMessage = useCallback(function (message) {\n    console.log('received message: ', message);\n  }, []);\n  var triggered = useCallback(function (room, alarmId) {\n    console.log('joining room: ', room);\n  }, []);\n  var resetStuff = useCallback(function () {}, []);\n  var disconnection = useCallback(function () {}, []);\n  useEffect(function () {\n    function em() {\n      var id, token;\n      return _regeneratorRuntime.async(function em$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"userId\"));\n\n            case 2:\n              id = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));\n\n            case 5:\n              token = _context.sent;\n              socket.emit('auth', {\n                userId: id,\n                token: token\n              });\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    em();\n    socket.on('triggered', function (room, alarmId) {\n      triggered(room, alarmId);\n    });\n    socket.on('get-message', function (message) {\n      getMessage(message);\n    });\n    socket.on('get-snooze', function () {\n      setSnoozeCount(snoozeCount + 1);\n    });\n    socket.on('get-dismiss', function () {\n      setDismissCount(dismissCount + 1);\n    });\n    socket.on('snooze-begin', function () {\n      console.log('snooze for 9 minutes!');\n      resetStuff();\n    });\n    socket.on('dismiss-begin', function () {\n      console.log('both users have dismissed alarm!');\n    });\n    socket.on('room-disconnect', function () {\n      console.log('time up, disconnected from room');\n      resetStuff();\n      disconnection();\n    });\n    return function () {\n      socket.offAny();\n    };\n  }, [socket, getMessage, resetStuff, setSnoozeCount, disconnection, triggered]);\n\n  function storeClick() {\n    props.navigation.navigate('Store');\n  }\n\n  function alarmsClick() {\n    alert('already in alarms page');\n  }\n\n  function profileClick() {\n    alert('clicked on profile');\n  }\n\n  function createAlarm() {\n    setPickerOpen(false);\n    setTurnOnNotify(true);\n    console.log();\n  }\n\n  function cancelAlarm() {\n    setActive(false);\n    setPickerOpen(false);\n    setTurnOnNotify(false);\n  }\n\n  function turnOn() {\n    setTurnOnNotify(true);\n  }\n\n  function confirmCreateAlarm() {\n    var alarmString, eventTime, finalTime, USERID, TOKEN, payload;\n    return _regeneratorRuntime.async(function confirmCreateAlarm$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setActive(true);\n            setPickerOpen(false);\n            setTurnOnNotify(false);\n            alarmString = date + \" \" + time + \":00\";\n            eventTime = new Date(alarmString);\n            eventTime.setHours(eventTime.getHours() - 4);\n            finalTime = eventTime.toISOString();\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"userId\"));\n\n          case 9:\n            USERID = _context2.sent;\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));\n\n          case 12:\n            TOKEN = _context2.sent;\n            payload = {\n              alarmTime: finalTime,\n              userId: USERID,\n              token: TOKEN\n            };\n            _context2.next = 16;\n            return _regeneratorRuntime.awrap(axios.post('http://192.168.1.181:5000/createAlarm', payload));\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var picker;\n\n  if (pickerOpen) {\n    picker = React.createElement(React.Fragment, null, React.createElement(TextInput, {\n      style: {\n        color: \"#f3f3f3\"\n      },\n      placeholder: \"setTime\",\n      onChange: function onChange(e) {\n        return setTime(e.target.value);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }), React.createElement(TextInput, {\n      style: {\n        color: \"#f3f3f3\"\n      },\n      placeholder: \"setDate\",\n      onChange: function onChange(e) {\n        return setDate(e.target.value);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }), React.createElement(View, {\n      style: styles.alarmButtonsContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return createAlarm();\n      },\n      style: styles.setAlarmButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, \"Set\")), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return cancelAlarm();\n      },\n      style: styles.setCloseButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }, \"Cancel\"))));\n  } else picker = null;\n\n  var activateModal;\n\n  if (turnOnNotify) {\n    if (active) {\n      activateModal = React.createElement(View, {\n        style: styles.activateModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 25\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }\n      }, \"Cancel alarm for \", time, \" on \", date, \"?\"), React.createElement(View, {\n        style: styles.alarmButtonsContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return cancelAlarm();\n        },\n        style: styles.setAlarmButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 29\n        }\n      }, \"Confirm\")), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return setTurnOnNotify(false);\n        },\n        style: styles.setCloseButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 29\n        }\n      }, \"Back\"))));\n    } else {\n      activateModal = React.createElement(View, {\n        style: styles.activateModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 25\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }\n      }, \"Set alarm for \", time, \" on \", date, \"?\"), React.createElement(View, {\n        style: styles.alarmButtonsContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return confirmCreateAlarm();\n        },\n        style: styles.setAlarmButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 29\n        }\n      }, \"Confirm\")), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return setTurnOnNotify(false);\n        },\n        style: styles.setCloseButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 29\n        }\n      }, \"Back\"))));\n    }\n  } else activateModal = null;\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.topContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: storeClick,\n    style: styles.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    color: \"#e1e1e1\",\n    name: \"shopping-outline\",\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: alarmsClick,\n    style: styles.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    color: \"#e1e1e1\",\n    name: \"clock-outline\",\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  })), React.createElement(Coin, {\n    color: \"#C7F0DB\",\n    name: \"coins\",\n    style: {\n      marginLeft: 60\n    },\n    size: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }), React.createElement(Text, {\n    style: {\n      color: '#C7F0DB',\n      marginLeft: 6\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, \"+150\"), React.createElement(TouchableOpacity, {\n    onPress: profileClick,\n    style: styles.profilebutton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    color: \"#e1e1e1\",\n    name: \"account-circle-outline\",\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }))), React.createElement(View, {\n    style: styles.mainPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, picker, activateModal, React.createElement(TouchableOpacity, {\n    style: styles.alarmContainer,\n    onPress: function onPress() {\n      return setPickerOpen(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: styles.rowAlarmContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: styles.alarmTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 25\n    }\n  }, time == '' ? \"00:00\" : time), React.createElement(TouchableOpacity, {\n    style: styles.activateButton,\n    onPress: function onPress() {\n      return turnOn();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20,\n      color: '#222'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 29\n    }\n  }, active ? \"active\" : \"Turn On\"))), React.createElement(Text, {\n    style: {\n      fontSize: 16,\n      marginLeft: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 21\n    }\n  }, date))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    display: 'flex',\n    flex: 1,\n    flexDirection: 'column'\n  },\n  topContainer: {\n    flex: 1,\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    height: 40,\n    maxHeight: 60,\n    width: '100%',\n    backgroundColor: '#060930'\n  },\n  mainPage: {\n    backgroundColor: '#060930',\n    display: 'flex',\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center'\n  },\n  button: {\n    width: 60,\n    height: 40,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    marginLeft: 20,\n    color: '#e1e1e1'\n  },\n  profilebutton: {\n    width: 60,\n    height: 40,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    marginLeft: 20,\n    color: '#e1e1e1'\n  },\n  buttonText: {\n    fontSize: 15,\n    color: '#e1e1e1'\n  },\n  datePicker: {\n    borderRadius: 10,\n    position: 'relative',\n    zIndex: 4\n  },\n  alarmContainer: {\n    display: 'flex',\n    flex: 1,\n    height: 120,\n    maxHeight: 120,\n    width: \"90%\",\n    backgroundColor: '#fff',\n    marginTop: 40,\n    borderRadius: 10,\n    position: 'absolute',\n    zIndex: 1,\n    justifyContent: 'center'\n  },\n  pickerView: {\n    width: '90%',\n    height: 100\n  },\n  setAlarmButton: {\n    width: '45%',\n    height: 70,\n    backgroundColor: 'skyblue',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10\n  },\n  setCloseButton: {\n    width: '45%',\n    marginLeft: 10,\n    height: 70,\n    backgroundColor: '#fff',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10\n  },\n  alarmButtonsContainer: {\n    marginTop: 5,\n    display: 'flex',\n    flexDirection: 'row',\n    flex: 1\n  },\n  alarmTime: {\n    fontSize: 60,\n    alignSelf: 'flex-start',\n    marginLeft: 20\n  },\n  rowAlarmContainer: {\n    width: '100%',\n    height: 80,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  activateButton: {\n    marginLeft: 30,\n    width: 100,\n    height: 60,\n    borderRadius: 10,\n    backgroundColor: 'skyblue',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  activateModal: {\n    position: 'relative',\n    zIndex: 5,\n    marginTop: 40,\n    display: 'flex',\n    flex: 1,\n    flexDirection: 'column',\n    width: '90%',\n    height: 160,\n    maxHeight: 160,\n    backgroundColor: '#fff',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"sources":["C:/Users/Alden/Documents/Code/javascript/mobile/sleepedo2main/sleepedo2_client/components/home.js"],"names":["React","useState","useEffect","useContext","useCallback","TouchableOpacityBase","Icon","Coin","DatePicker","AsyncStorage","SocketContext","axios","Home","props","date","setDate","time","setTime","pickerOpen","setPickerOpen","active","setActive","turnOnNotify","setTurnOnNotify","snoozeCount","setSnoozeCount","dismissCount","setDismissCount","socket","getMessage","message","console","log","triggered","room","alarmId","resetStuff","disconnection","em","getItem","id","token","emit","userId","on","offAny","storeClick","navigation","navigate","alarmsClick","alert","profileClick","createAlarm","cancelAlarm","turnOn","confirmCreateAlarm","alarmString","eventTime","Date","setHours","getHours","finalTime","toISOString","USERID","TOKEN","payload","alarmTime","post","picker","color","e","target","value","styles","alarmButtonsContainer","setAlarmButton","setCloseButton","activateModal","fontSize","container","topContainer","button","marginLeft","profilebutton","mainPage","alarmContainer","rowAlarmContainer","activateButton","StyleSheet","create","display","flex","flexDirection","alignItems","height","maxHeight","width","backgroundColor","justifyContent","borderRadius","buttonText","datePicker","position","zIndex","marginTop","pickerView","alignSelf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\r\nimport { TouchableOpacity, Button, SafeAreaView, StyleSheet, Text, TextInput, View, TouchableOpacityBase } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\r\nimport Coin from 'react-native-vector-icons/FontAwesome5';\r\nimport DatePicker from 'react-native-modern-datepicker';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { SocketContext } from './socket';\r\nimport axios from 'axios';\r\n\r\nexport default function Home(props) {\r\n    const [date, setDate] = useState('');\r\n    const [time, setTime] = useState('');\r\n    const [pickerOpen, setPickerOpen] = useState(false);\r\n    const [active, setActive] = useState(false);\r\n    const [turnOnNotify, setTurnOnNotify] = useState(false);\r\n    const [snoozeCount, setSnoozeCount] = useState(0);\r\n    const [dismissCount, setDismissCount] = useState(0);\r\n\r\n    const socket = useContext(SocketContext);\r\n\r\n    const getMessage = useCallback((message) => {\r\n        console.log('received message: ', message);\r\n        //addInTexts(message);\r\n    }, []);\r\n\r\n    const triggered = useCallback((room, alarmId) => {\r\n        console.log('joining room: ', room);\r\n        // setRoom(room);\r\n        // setAlarmId(alarmId);\r\n        // alarmTriggered();\r\n    }, []);\r\n\r\n    const resetStuff = useCallback(() => {\r\n        // setModalOpen(false);\r\n        // setDismissOpen(true);\r\n        // setSnoozeCount(0);\r\n        // setDismissCount(0);\r\n    }, []);\r\n\r\n    const disconnection = useCallback(() => {\r\n        // setDisconnected(true);\r\n        // setModalOpen(false);\r\n    }, [])\r\n    useEffect(() => {\r\n        async function em() {\r\n            const id = await AsyncStorage.getItem(\"userId\");\r\n            const token = await AsyncStorage.getItem(\"token\");\r\n            socket.emit('auth', {\r\n                userId: id,\r\n                token: token\r\n            });\r\n        }\r\n        em();\r\n\r\n        socket.on('triggered', (room, alarmId) => {\r\n            triggered(room, alarmId);\r\n        });\r\n        socket.on('get-message', (message) => {\r\n            getMessage(message);\r\n        });\r\n        socket.on('get-snooze', () => {\r\n            setSnoozeCount(snoozeCount + 1);  //other user hit snooze\r\n        })\r\n        socket.on('get-dismiss', () => {\r\n            setDismissCount(dismissCount + 1); //other user hit dismiss\r\n        })\r\n        socket.on('snooze-begin', () => {\r\n            console.log('snooze for 9 minutes!');\r\n            resetStuff();\r\n        })\r\n        socket.on('dismiss-begin', () => {\r\n            console.log('both users have dismissed alarm!');\r\n        })\r\n        socket.on('room-disconnect', () => {\r\n            console.log('time up, disconnected from room');\r\n            resetStuff();\r\n            disconnection();\r\n        })\r\n        return () => {\r\n            socket.offAny();\r\n        }\r\n    }, [socket, getMessage, resetStuff, setSnoozeCount, disconnection, triggered])\r\n\r\n\r\n\r\n    //------------------------------------------\r\n\r\n    function storeClick() {\r\n        props.navigation.navigate('Store');\r\n    }\r\n    function alarmsClick() {\r\n        alert('already in alarms page');\r\n    }\r\n    function profileClick() {\r\n        alert('clicked on profile');\r\n    }\r\n\r\n    function createAlarm() {\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(true);\r\n\r\n        console.log()\r\n    }\r\n    function cancelAlarm() {\r\n        setActive(false);\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(false);\r\n    }\r\n    function turnOn() {\r\n        setTurnOnNotify(true);\r\n    }\r\n\r\n    async function confirmCreateAlarm() {\r\n        setActive(true);\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(false);\r\n\r\n        const alarmString = `${date} ${time}:00`;\r\n        const eventTime = new Date(alarmString);\r\n        eventTime.setHours(eventTime.getHours() - 4);\r\n        const finalTime = eventTime.toISOString();\r\n        const USERID = await AsyncStorage.getItem(\"userId\");\r\n        const TOKEN = await AsyncStorage.getItem(\"token\");\r\n        const payload = { alarmTime: finalTime, userId: USERID, token: TOKEN }\r\n        await axios.post('http://192.168.1.181:5000/createAlarm', payload);\r\n    }\r\n\r\n    //open up the date picker\r\n    let picker;\r\n    if (pickerOpen) {\r\n\r\n        picker =\r\n            <>\r\n                {/* <DatePicker\r\n                    minuteInterval={1}\r\n                    style={styles.datePicker}\r\n                    onTimeChange={(time) => setTime(time)}\r\n                    onDateChange={(date) => setDate(date)}\r\n                /> */}\r\n                <TextInput style={{ color: \"#f3f3f3\" }} placeholder=\"setTime\" onChange={(e) => setTime(e.target.value)} />\r\n                <TextInput style={{ color: \"#f3f3f3\" }} placeholder=\"setDate\" onChange={(e) => setDate(e.target.value)} />\r\n                <View style={styles.alarmButtonsContainer}>\r\n                    <TouchableOpacity onPress={() => createAlarm()} style={styles.setAlarmButton}>\r\n                        <Text>Set</Text>\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity onPress={() => cancelAlarm()} style={styles.setCloseButton}>\r\n                        <Text>Cancel</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </>\r\n    }\r\n    else picker = null;\r\n\r\n\r\n\r\n    //confirm with user if they want to activate the alarm\r\n    let activateModal;\r\n    if (turnOnNotify) {\r\n\r\n        if (active) {\r\n            activateModal =\r\n                <View style={styles.activateModal}>\r\n                    <Text style={{ fontSize: 25 }}>Cancel alarm for {time} on {date}?</Text>\r\n                    <View style={styles.alarmButtonsContainer}>\r\n                        <TouchableOpacity onPress={() => cancelAlarm()} style={styles.setAlarmButton}>\r\n                            <Text>Confirm</Text>\r\n                        </TouchableOpacity>\r\n                        <TouchableOpacity onPress={() => setTurnOnNotify(false)} style={styles.setCloseButton}>\r\n                            <Text>Back</Text>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                </View>\r\n        }\r\n        else {\r\n            activateModal =\r\n                <View style={styles.activateModal}>\r\n                    <Text style={{ fontSize: 25 }}>Set alarm for {time} on {date}?</Text>\r\n                    <View style={styles.alarmButtonsContainer}>\r\n                        <TouchableOpacity onPress={() => confirmCreateAlarm()} style={styles.setAlarmButton}>\r\n                            <Text>Confirm</Text>\r\n                        </TouchableOpacity>\r\n                        <TouchableOpacity onPress={() => setTurnOnNotify(false)} style={styles.setCloseButton}>\r\n                            <Text>Back</Text>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                </View>\r\n        }\r\n    }\r\n    else activateModal = null;\r\n\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <View style={styles.topContainer}>\r\n                <TouchableOpacity onPress={storeClick} style={styles.button}>\r\n                    <Icon color=\"#e1e1e1\" name=\"shopping-outline\" size={25} />\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={alarmsClick} style={styles.button} >\r\n                    <Icon color=\"#e1e1e1\" name=\"clock-outline\" size={25} />\r\n                </TouchableOpacity>\r\n                <Coin color=\"#C7F0DB\" name=\"coins\" style={{ marginLeft: 60 }} size={15} />\r\n                <Text style={{ color: '#C7F0DB', marginLeft: 6 }}>+150</Text>\r\n                <TouchableOpacity onPress={profileClick} style={styles.profilebutton}>\r\n                    <Icon color=\"#e1e1e1\" name=\"account-circle-outline\" size={25} />\r\n                </TouchableOpacity>\r\n            </View>\r\n            <View style={styles.mainPage}>\r\n                {picker}\r\n                {activateModal}\r\n                <TouchableOpacity style={styles.alarmContainer} onPress={() => setPickerOpen(true)}>\r\n                    <View style={styles.rowAlarmContainer}>\r\n                        <Text style={styles.alarmTime}>{time == '' ? \"00:00\" : time}</Text>\r\n                        <TouchableOpacity style={styles.activateButton} onPress={() => turnOn()}>\r\n                            <Text style={{ fontSize: 20, color: '#222' }}>{active ? \"active\" : \"Turn On\"}</Text>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                    <Text style={{ fontSize: 16, marginLeft: 40 }}>{date}</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </View >\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        flexDirection: 'column',\r\n    },\r\n    topContainer: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        height: 40,\r\n        maxHeight: 60,\r\n        width: '100%',\r\n        backgroundColor: '#060930'\r\n    },\r\n    mainPage: {\r\n        backgroundColor: '#060930',\r\n        display: 'flex',\r\n        flex: 1,\r\n        justifyContent: 'flex-start',\r\n        alignItems: 'center',\r\n    },\r\n    button: {\r\n        width: 60,\r\n        height: 40,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 5,\r\n        marginLeft: 20,\r\n        color: '#e1e1e1'\r\n    },\r\n    profilebutton: {\r\n        width: 60,\r\n        height: 40,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 5,\r\n        marginLeft: 20,\r\n        color: '#e1e1e1'\r\n    },\r\n    buttonText: {\r\n        fontSize: 15,\r\n        color: '#e1e1e1'\r\n    },\r\n    datePicker: {\r\n        borderRadius: 10,\r\n        position: 'relative',\r\n        zIndex: 4,\r\n    },\r\n    alarmContainer: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        height: 120,\r\n        maxHeight: 120,\r\n        width: \"90%\",\r\n        backgroundColor: '#fff',\r\n        marginTop: 40,\r\n        borderRadius: 10,\r\n        position: 'absolute',\r\n        zIndex: 1,\r\n        justifyContent: 'center',\r\n    },\r\n    pickerView: {\r\n\r\n        width: '90%',\r\n        height: 100\r\n    },\r\n    setAlarmButton: {\r\n        width: '45%',\r\n        height: 70,\r\n        backgroundColor: 'skyblue',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 10,\r\n    },\r\n    setCloseButton: {\r\n        width: '45%',\r\n        marginLeft: 10,\r\n        height: 70,\r\n        backgroundColor: '#fff',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 10,\r\n    },\r\n    alarmButtonsContainer: {\r\n        marginTop: 5,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        flex: 1\r\n    },\r\n    alarmTime: {\r\n        fontSize: 60,\r\n        alignSelf: 'flex-start',\r\n        marginLeft: 20\r\n    },\r\n    rowAlarmContainer: {\r\n        width: '100%',\r\n        height: 80,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        alignItems: 'center'\r\n    },\r\n    activateButton: {\r\n        marginLeft: 30,\r\n        width: 100,\r\n        height: 60,\r\n        borderRadius: 10,\r\n        backgroundColor: 'skyblue',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n    activateModal: {\r\n        position: 'relative',\r\n        zIndex: 5,\r\n        marginTop: 40,\r\n        display: 'flex',\r\n        flex: 1,\r\n        flexDirection: 'column',\r\n        width: '90%',\r\n        height: 160,\r\n        maxHeight: 160,\r\n        backgroundColor: '#fff',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    }\r\n})"]},"metadata":{},"sourceType":"module"}