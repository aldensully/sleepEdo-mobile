{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Alden\\\\Documents\\\\Code\\\\javascript\\\\mobile\\\\sleepedo2main\\\\sleepedo2_client\\\\components\\\\home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Icon from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport ChatIcon from \"@expo/vector-icons/Ionicons\";\nimport Coin from \"@expo/vector-icons/FontAwesome5\";\nimport DatePicker from 'react-native-modern-datepicker';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { SocketContext } from \"./socket\";\nimport axios from 'axios';\nimport Chatbox from \"./chatbox\";\nimport AlarmTriggeredModal from \"./alarmTriggeredModal\";\nexport default function Home(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      date = _useState2[0],\n      setDate = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      time = _useState4[0],\n      setTime = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pickerOpen = _useState6[0],\n      setPickerOpen = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      active = _useState8[0],\n      setActive = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      turnOnNotify = _useState10[0],\n      setTurnOnNotify = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      activeChat = _useState12[0],\n      setActiveChat = _useState12[1];\n\n  var _useState13 = useState('Rainbow69'),\n      _useState14 = _slicedToArray(_useState13, 2),\n      partner = _useState14[0],\n      setPartner = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      alarmTriggered = _useState16[0],\n      setAlarmTriggered = _useState16[1];\n\n  var _useState17 = useState(''),\n      _useState18 = _slicedToArray(_useState17, 2),\n      room = _useState18[0],\n      setRoom = _useState18[1];\n\n  var _useState19 = useState(''),\n      _useState20 = _slicedToArray(_useState19, 2),\n      alarmId = _useState20[0],\n      setAlarmId = _useState20[1];\n\n  var socket = useContext(SocketContext);\n  useEffect(function () {\n    function em() {\n      var id, token;\n      return _regeneratorRuntime.async(function em$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id = sessionStorage.getItem(\"userId\");\n              token = sessionStorage.getItem(\"token\");\n              socket.emit('auth', {\n                userId: id,\n                token: token\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    em();\n    socket.on('triggered', function (room, alarmId) {\n      console.log('triggered!!!');\n      setRoom(room);\n      setAlarmId(alarmId);\n      setAlarmTriggered(true);\n    });\n    socket.on('room-disconnect', function () {});\n    return function () {\n      socket.offAny();\n    };\n  }, [socket]);\n\n  function storeClick() {\n    props.navigation.navigate('Store');\n  }\n\n  function alarmsClick() {\n    alert('already in alarms page');\n  }\n\n  function profileClick() {\n    alert('clicked on profile');\n  }\n\n  function createAlarm() {\n    setPickerOpen(false);\n    setTurnOnNotify(true);\n    console.log();\n  }\n\n  function cancelAlarm() {\n    setActive(false);\n    setPickerOpen(false);\n    setTurnOnNotify(false);\n  }\n\n  function turnOn() {\n    setTurnOnNotify(true);\n  }\n\n  function confirmCreateAlarm() {\n    var alarmString, eventTime, finalTime, USERID, TOKEN, payload;\n    return _regeneratorRuntime.async(function confirmCreateAlarm$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setActive(true);\n            setPickerOpen(false);\n            setTurnOnNotify(false);\n            alarmString = date + \" \" + time + \":00\";\n            eventTime = new Date(alarmString);\n            eventTime.setHours(eventTime.getHours() - 4);\n            finalTime = eventTime.toISOString();\n            USERID = sessionStorage.getItem(\"userId\");\n            TOKEN = sessionStorage.getItem(\"token\");\n            payload = {\n              alarmTime: finalTime,\n              userId: USERID,\n              token: TOKEN\n            };\n            _context2.next = 12;\n            return _regeneratorRuntime.awrap(axios.post('http://192.168.1.181:5000/createAlarm', payload));\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function muteAudio() {}\n\n  var picker;\n  if (pickerOpen) picker = Picker();else picker = null;\n  var activateModal;\n\n  if (turnOnNotify) {\n    if (active) activateModal = cancelAlarmModel();else activateModal = setAlarmModal();\n  }\n\n  var backToChat;\n  if (activeChat) backToChat = backToChatModal();\n  var alarmTriggeredModal;\n  if (alarmTriggered) alarmTriggeredModal = React.createElement(AlarmTriggeredModal, {\n    room: room,\n    alarmId: alarmId,\n    onSetAlarmTriggered: setAlarmTriggered(false),\n    onMute: muteAudio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 47\n    }\n  });else alarmTriggeredModal = null;\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.topContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: storeClick,\n    style: styles.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    color: \"#e1e1e1\",\n    name: \"shopping-outline\",\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: alarmsClick,\n    style: styles.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    color: \"#e1e1e1\",\n    name: \"clock-outline\",\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  })), React.createElement(Coin, {\n    color: \"#C7F0DB\",\n    name: \"coins\",\n    style: {\n      marginLeft: 60\n    },\n    size: 15,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }), React.createElement(Text, {\n    style: {\n      color: '#C7F0DB',\n      marginLeft: 6\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, \"+150\"), React.createElement(TouchableOpacity, {\n    onPress: profileClick,\n    style: styles.profilebutton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, React.createElement(Icon, {\n    color: \"#e1e1e1\",\n    name: \"account-circle-outline\",\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }))), React.createElement(View, {\n    style: styles.mainPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, backToChat, picker, activateModal, alarmTriggeredModal, React.createElement(TouchableOpacity, {\n    style: styles.alarmContainer,\n    onPress: function onPress() {\n      return setPickerOpen(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: styles.rowAlarmContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: styles.alarmTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, time == '' ? \"00:00\" : time), React.createElement(TouchableOpacity, {\n    style: styles.activateButton,\n    onPress: function onPress() {\n      return turnOn();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20,\n      color: '#222'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, active ? \"active\" : \"Turn On\"))), React.createElement(Text, {\n    style: {\n      fontSize: 16,\n      marginLeft: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, date))));\n\n  function backToChatModal() {\n    return React.createElement(TouchableOpacity, {\n      style: styles.backtochat,\n      onPress: function onPress() {\n        return props.navigation.navigate(\"Chat\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 16\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: '#222',\n        fontSize: 18\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, partner), React.createElement(ChatIcon, {\n      style: {\n        fontSize: 30,\n        color: '#222',\n        marginRight: 10,\n        marginLeft: 10\n      },\n      color: \"#e1e1e1\",\n      name: \"arrow-forward-sharp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }));\n  }\n\n  function setAlarmModal() {\n    return React.createElement(View, {\n      style: styles.activateModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 16\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 25\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    }, \"Set alarm for \", time, \" on \", date, \"?\"), React.createElement(View, {\n      style: styles.alarmButtonsContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return confirmCreateAlarm();\n      },\n      style: styles.setAlarmButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, \"Confirm\")), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return setTurnOnNotify(false);\n      },\n      style: styles.setCloseButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, \"Back\"))));\n  }\n\n  function cancelAlarmModel() {\n    return React.createElement(View, {\n      style: styles.activateModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 16\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 25\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }, \"Cancel alarm for \", time, \" on \", date, \"?\"), React.createElement(View, {\n      style: styles.alarmButtonsContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return cancelAlarm();\n      },\n      style: styles.setAlarmButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 21\n      }\n    }, \"Confirm\")), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return setTurnOnNotify(false);\n      },\n      style: styles.setCloseButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, \"Back\"))));\n  }\n\n  function Picker() {\n    return React.createElement(React.Fragment, null, React.createElement(TextInput, {\n      style: {\n        color: \"#f3f3f3\"\n      },\n      placeholder: \"setTime\",\n      onChange: function onChange(e) {\n        return setTime(e.target.value);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }\n    }), React.createElement(TextInput, {\n      style: {\n        color: \"#f3f3f3\"\n      },\n      placeholder: \"setDate\",\n      onChange: function onChange(e) {\n        return setDate(e.target.value);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }), React.createElement(View, {\n      style: styles.alarmButtonsContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return createAlarm();\n      },\n      style: styles.setAlarmButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    }, \"Set\")), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return cancelAlarm();\n      },\n      style: styles.setCloseButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, \"Cancel\"))));\n  }\n}\nvar styles = StyleSheet.create({\n  container: {\n    display: 'flex',\n    flex: 1,\n    flexDirection: 'column',\n    marginTop: 24\n  },\n  topContainer: {\n    flex: 1,\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    height: 40,\n    maxHeight: 60,\n    width: '100%',\n    backgroundColor: '#fafbff'\n  },\n  mainPage: {\n    backgroundColor: '#f3f3f3',\n    display: 'flex',\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center'\n  },\n  button: {\n    width: 60,\n    height: 40,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    marginLeft: 20,\n    color: '#222'\n  },\n  profilebutton: {\n    width: 60,\n    height: 40,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n    marginLeft: 20,\n    color: '#222'\n  },\n  buttonText: {\n    fontSize: 15,\n    color: '#222'\n  },\n  datePicker: {\n    borderRadius: 10,\n    position: 'relative',\n    zIndex: 4\n  },\n  alarmContainer: {\n    display: 'flex',\n    flex: 1,\n    height: 120,\n    maxHeight: 120,\n    width: \"90%\",\n    backgroundColor: '#f3f3f3f',\n    marginTop: 60,\n    borderRadius: 10,\n    position: 'absolute',\n    zIndex: 1,\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: '#222'\n  },\n  pickerView: {\n    width: '90%',\n    height: 100\n  },\n  setAlarmButton: {\n    width: '45%',\n    height: 70,\n    backgroundColor: '#f3f3f3',\n    color: '#222',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10\n  },\n  setCloseButton: {\n    width: '45%',\n    marginLeft: 10,\n    height: 70,\n    backgroundColor: '#f3f3f3',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 10\n  },\n  alarmButtonsContainer: {\n    marginTop: 5,\n    display: 'flex',\n    flexDirection: 'row',\n    flex: 1\n  },\n  alarmTime: {\n    fontSize: 60,\n    alignSelf: 'flex-start',\n    marginLeft: 20\n  },\n  rowAlarmContainer: {\n    width: '100%',\n    height: 80,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  activateButton: {\n    marginLeft: 30,\n    width: 100,\n    height: 60,\n    borderRadius: 10,\n    backgroundColor: '#f3f3f3',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: '#222'\n  },\n  activateModal: {\n    position: 'relative',\n    zIndex: 5,\n    marginTop: 40,\n    display: 'flex',\n    flex: 1,\n    flexDirection: 'column',\n    width: '90%',\n    height: 160,\n    maxHeight: 160,\n    backgroundColor: '#f3f3f3',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#222'\n  },\n  backtochat: {\n    backgroundColor: '#f3f3f3',\n    width: '100%',\n    height: 50,\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"sources":["C:/Users/Alden/Documents/Code/javascript/mobile/sleepedo2main/sleepedo2_client/components/home.js"],"names":["React","useState","useEffect","useContext","useCallback","Icon","ChatIcon","Coin","DatePicker","AsyncStorage","SocketContext","axios","Chatbox","AlarmTriggeredModal","Home","props","date","setDate","time","setTime","pickerOpen","setPickerOpen","active","setActive","turnOnNotify","setTurnOnNotify","activeChat","setActiveChat","partner","setPartner","alarmTriggered","setAlarmTriggered","room","setRoom","alarmId","setAlarmId","socket","em","id","sessionStorage","getItem","token","emit","userId","on","console","log","offAny","storeClick","navigation","navigate","alarmsClick","alert","profileClick","createAlarm","cancelAlarm","turnOn","confirmCreateAlarm","alarmString","eventTime","Date","setHours","getHours","finalTime","toISOString","USERID","TOKEN","payload","alarmTime","post","muteAudio","picker","Picker","activateModal","cancelAlarmModel","setAlarmModal","backToChat","backToChatModal","alarmTriggeredModal","styles","container","topContainer","button","marginLeft","color","profilebutton","mainPage","alarmContainer","rowAlarmContainer","activateButton","fontSize","backtochat","marginRight","alarmButtonsContainer","setAlarmButton","setCloseButton","e","target","value","StyleSheet","create","display","flex","flexDirection","marginTop","alignItems","height","maxHeight","width","backgroundColor","justifyContent","borderRadius","buttonText","datePicker","position","zIndex","borderWidth","borderColor","pickerView","alignSelf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\r\nimport { TouchableOpacity, StyleSheet, Text, TextInput, View } from 'react-native';\r\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\r\nimport ChatIcon from 'react-native-vector-icons/Ionicons';\r\nimport Coin from 'react-native-vector-icons/FontAwesome5';\r\nimport DatePicker from 'react-native-modern-datepicker';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { SocketContext } from './socket';\r\nimport axios from 'axios';\r\nimport Chatbox from './chatbox';\r\nimport AlarmTriggeredModal from './alarmTriggeredModal';\r\n\r\nexport default function Home(props) {\r\n    const [date, setDate] = useState('');\r\n    const [time, setTime] = useState('');\r\n    const [pickerOpen, setPickerOpen] = useState(false);\r\n    const [active, setActive] = useState(false);\r\n    const [turnOnNotify, setTurnOnNotify] = useState(false);\r\n    const [activeChat, setActiveChat] = useState(false);\r\n    const [partner, setPartner] = useState('Rainbow69');\r\n    const [alarmTriggered, setAlarmTriggered] = useState(false);\r\n    const [room, setRoom] = useState('');\r\n    const [alarmId, setAlarmId] = useState('');\r\n\r\n    const socket = useContext(SocketContext);\r\n\r\n    useEffect(() => {\r\n        async function em() {\r\n            // const id = await AsyncStorage.getItem(\"userId\");\r\n            // const token = await AsyncStorage.getItem(\"token\");\r\n            const id = sessionStorage.getItem(\"userId\");\r\n            const token = sessionStorage.getItem(\"token\");\r\n\r\n            socket.emit('auth', {\r\n                userId: id,\r\n                token: token\r\n            });\r\n        }\r\n        em();\r\n\r\n        socket.on('triggered', (room, alarmId) => {\r\n            console.log('triggered!!!');\r\n            setRoom(room);\r\n            setAlarmId(alarmId);\r\n            setAlarmTriggered(true);  //opens up modal for dismiss, snooze,etc\r\n        });\r\n\r\n        socket.on('room-disconnect', () => {\r\n        })\r\n        return () => {\r\n            socket.offAny();\r\n        }\r\n    }, [socket])\r\n\r\n    //------------------------------------------\r\n\r\n    function storeClick() {\r\n        props.navigation.navigate('Store');\r\n    }\r\n    function alarmsClick() {\r\n        alert('already in alarms page');\r\n    }\r\n    function profileClick() {\r\n        alert('clicked on profile');\r\n    }\r\n\r\n    function createAlarm() {\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(true);\r\n        console.log()\r\n    }\r\n    function cancelAlarm() {\r\n        setActive(false);\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(false);\r\n    }\r\n    function turnOn() {\r\n        setTurnOnNotify(true);\r\n    }\r\n\r\n    async function confirmCreateAlarm() {\r\n        setActive(true);\r\n        setPickerOpen(false);\r\n        setTurnOnNotify(false);\r\n\r\n        const alarmString = `${date} ${time}:00`;\r\n        const eventTime = new Date(alarmString);\r\n        eventTime.setHours(eventTime.getHours() - 4);\r\n        const finalTime = eventTime.toISOString();\r\n\r\n        //-------- For Mobile use ASYNC STORAGE ---------\r\n        // const USERID = await AsyncStorage.getItem(\"userId\");\r\n        // const TOKEN = await AsyncStorage.getItem(\"token\");\r\n\r\n        //-------- For web(testing) use SessionStorage ----------\r\n        const USERID = sessionStorage.getItem(\"userId\");\r\n        const TOKEN = sessionStorage.getItem(\"token\");\r\n        const payload = { alarmTime: finalTime, userId: USERID, token: TOKEN }\r\n        await axios.post('http://192.168.1.181:5000/createAlarm', payload);\r\n    }\r\n\r\n    function muteAudio() {\r\n        //do something to mute the audio\r\n    }\r\n\r\n    //open up the date picker\r\n    let picker;\r\n    if (pickerOpen) picker = Picker()\r\n    else picker = null;\r\n    //confirm with user if they want to activate the alarm\r\n    let activateModal;\r\n    if (turnOnNotify) {\r\n        if (active) activateModal = cancelAlarmModel()\r\n        else activateModal = setAlarmModal()\r\n    }\r\n    //navigate back to chat if chat still active\r\n    let backToChat;\r\n    if (activeChat) backToChat = backToChatModal()\r\n    //alarm main notification modal\r\n    let alarmTriggeredModal;\r\n    if (alarmTriggered) alarmTriggeredModal = <AlarmTriggeredModal room={room} alarmId={alarmId} onSetAlarmTriggered={setAlarmTriggered(false)} onMute={muteAudio} />;\r\n    else alarmTriggeredModal = null;\r\n\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <View style={styles.topContainer}>\r\n                <TouchableOpacity onPress={storeClick} style={styles.button}>\r\n                    <Icon color=\"#e1e1e1\" name=\"shopping-outline\" size={25} />\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={alarmsClick} style={styles.button} >\r\n                    <Icon color=\"#e1e1e1\" name=\"clock-outline\" size={25} />\r\n                </TouchableOpacity>\r\n                <Coin color=\"#C7F0DB\" name=\"coins\" style={{ marginLeft: 60 }} size={15} />\r\n                <Text style={{ color: '#C7F0DB', marginLeft: 6 }}>+150</Text>\r\n                <TouchableOpacity onPress={profileClick} style={styles.profilebutton}>\r\n                    <Icon color=\"#e1e1e1\" name=\"account-circle-outline\" size={25} />\r\n                </TouchableOpacity>\r\n            </View>\r\n            <View style={styles.mainPage}>\r\n                {backToChat}\r\n                {picker}\r\n                {activateModal}\r\n                {alarmTriggeredModal}\r\n                <TouchableOpacity style={styles.alarmContainer} onPress={() => setPickerOpen(true)}>\r\n                    <View style={styles.rowAlarmContainer}>\r\n                        <Text style={styles.alarmTime}>{time == '' ? \"00:00\" : time}</Text>\r\n                        <TouchableOpacity style={styles.activateButton} onPress={() => turnOn()}>\r\n                            <Text style={{ fontSize: 20, color: '#222' }}>{active ? \"active\" : \"Turn On\"}</Text>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                    <Text style={{ fontSize: 16, marginLeft: 40 }}>{date}</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </View >\r\n    )\r\n\r\n\r\n\r\n    //----------- COMPONENT FUNCTIONS -------------------------------------------------------------\r\n\r\n    function backToChatModal() {\r\n        return <TouchableOpacity style={styles.backtochat} onPress={() => props.navigation.navigate(\"Chat\")}>\r\n            <Text style={{ color: '#222', fontSize: 18 }}>{partner}</Text>\r\n            <ChatIcon style={{ fontSize: 30, color: '#222', marginRight: 10, marginLeft: 10 }} color=\"#e1e1e1\" name=\"arrow-forward-sharp\" />\r\n        </TouchableOpacity>;\r\n    }\r\n\r\n    function setAlarmModal() {\r\n        return <View style={styles.activateModal}>\r\n            <Text style={{ fontSize: 25 }}>Set alarm for {time} on {date}?</Text>\r\n            <View style={styles.alarmButtonsContainer}>\r\n                <TouchableOpacity onPress={() => confirmCreateAlarm()} style={styles.setAlarmButton}>\r\n                    <Text>Confirm</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={() => setTurnOnNotify(false)} style={styles.setCloseButton}>\r\n                    <Text>Back</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </View>;\r\n    }\r\n\r\n    function cancelAlarmModel() {\r\n        return <View style={styles.activateModal}>\r\n            <Text style={{ fontSize: 25 }}>Cancel alarm for {time} on {date}?</Text>\r\n            <View style={styles.alarmButtonsContainer}>\r\n                <TouchableOpacity onPress={() => cancelAlarm()} style={styles.setAlarmButton}>\r\n                    <Text>Confirm</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={() => setTurnOnNotify(false)} style={styles.setCloseButton}>\r\n                    <Text>Back</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </View>;\r\n    }\r\n\r\n    function Picker() {\r\n        return <>\r\n            {/* <DatePicker\r\n            minuteInterval={1}\r\n            style={styles.datePicker}\r\n            onTimeChange={(time) => setTime(time)}\r\n            onDateChange={(date) => setDate(date)}\r\n        /> */}\r\n            <TextInput style={{ color: \"#f3f3f3\" }} placeholder=\"setTime\" onChange={(e) => setTime(e.target.value)} />\r\n            <TextInput style={{ color: \"#f3f3f3\" }} placeholder=\"setDate\" onChange={(e) => setDate(e.target.value)} />\r\n            <View style={styles.alarmButtonsContainer}>\r\n                <TouchableOpacity onPress={() => createAlarm()} style={styles.setAlarmButton}>\r\n                    <Text>Set</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={() => cancelAlarm()} style={styles.setCloseButton}>\r\n                    <Text>Cancel</Text>\r\n                </TouchableOpacity>\r\n            </View>\r\n        </>;\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        flexDirection: 'column',\r\n        marginTop: 24,\r\n    },\r\n    topContainer: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        height: 40,\r\n        maxHeight: 60,\r\n        width: '100%',\r\n        backgroundColor: '#fafbff',\r\n    },\r\n    mainPage: {\r\n        backgroundColor: '#f3f3f3',\r\n        display: 'flex',\r\n        flex: 1,\r\n        justifyContent: 'flex-start',\r\n        alignItems: 'center',\r\n    },\r\n    button: {\r\n        width: 60,\r\n        height: 40,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 5,\r\n        marginLeft: 20,\r\n        color: '#222'\r\n    },\r\n    profilebutton: {\r\n        width: 60,\r\n        height: 40,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 5,\r\n        marginLeft: 20,\r\n        color: '#222'\r\n    },\r\n    buttonText: {\r\n        fontSize: 15,\r\n        color: '#222'\r\n    },\r\n    datePicker: {\r\n        borderRadius: 10,\r\n        position: 'relative',\r\n        zIndex: 4,\r\n    },\r\n    alarmContainer: {\r\n        display: 'flex',\r\n        flex: 1,\r\n        height: 120,\r\n        maxHeight: 120,\r\n        width: \"90%\",\r\n        backgroundColor: '#f3f3f3f',\r\n        marginTop: 60,\r\n        borderRadius: 10,\r\n        position: 'absolute',\r\n        zIndex: 1,\r\n        justifyContent: 'center',\r\n        borderWidth: 1,\r\n        borderColor: '#222'\r\n    },\r\n    pickerView: {\r\n\r\n        width: '90%',\r\n        height: 100\r\n    },\r\n    setAlarmButton: {\r\n        width: '45%',\r\n        height: 70,\r\n        backgroundColor: '#f3f3f3',\r\n        color: '#222',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 10,\r\n    },\r\n    setCloseButton: {\r\n        width: '45%',\r\n        marginLeft: 10,\r\n        height: 70,\r\n        backgroundColor: '#f3f3f3',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 10,\r\n    },\r\n    alarmButtonsContainer: {\r\n        marginTop: 5,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        flex: 1\r\n    },\r\n    alarmTime: {\r\n        fontSize: 60,\r\n        alignSelf: 'flex-start',\r\n        marginLeft: 20\r\n    },\r\n    rowAlarmContainer: {\r\n        width: '100%',\r\n        height: 80,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        alignItems: 'center'\r\n    },\r\n    activateButton: {\r\n        marginLeft: 30,\r\n        width: 100,\r\n        height: 60,\r\n        borderRadius: 10,\r\n        backgroundColor: '#f3f3f3',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        borderWidth: 1,\r\n        borderColor: '#222'\r\n    },\r\n    activateModal: {\r\n        position: 'relative',\r\n        zIndex: 5,\r\n        marginTop: 40,\r\n        display: 'flex',\r\n        flex: 1,\r\n        flexDirection: 'column',\r\n        width: '90%',\r\n        height: 160,\r\n        maxHeight: 160,\r\n        backgroundColor: '#f3f3f3',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderWidth: 1,\r\n        borderColor: '#222'\r\n    },\r\n    backtochat: {\r\n        backgroundColor: '#f3f3f3',\r\n        width: '100%',\r\n        height: 50,\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        alignItems: 'center'\r\n    }\r\n})"]},"metadata":{},"sourceType":"module"}